"use strict";function searchEscape(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return t.replace(/[&<>"'/]/g,function(t){return e[t]})}function regEscape(t){var e={"{":"\\{","}":"\\}","[":"\\[","]":"\\]","(":"\\(",")":"\\)","?":"\\?","*":"\\*",".":"\\.","+":"\\+","^":"\\^",$:"\\$"};return t.replace(/[\{\}\[\]\(\)\?\*\.\+\^\$]/g,function(t){return e[t]})}function getParam(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function clearPosts(){document.getElementById("search-result").innerHTML=""}function createPosts(t){var e=document.getElementById("search-result"),c="";t.forEach(function(t){c+="<hr />";var e=t[0],n='\n        <a href="'.concat(e.link,'" class="search-result__link">\n            <div class=\'search-result__item\'>\n                <strong>\n                    ').concat(e.title,'\n                </strong>\n                <div class="search-result__content">\n                    ').concat(e.content,"\n                </div>\n            </div>\n        </a>\n        ");c+=n}),e.innerHTML=c}function loadDataSearch(t,e){fetch(t).then(function(t){return t.json()}).then(function(t){var u=[],l=0,f=e.trim().toLowerCase().split(/\s/);t.forEach(function(t){var e,n,c,r,a,o,i,s;void 0!==t.title&&void 0!==t.content&&(e=!1,n=t.title.trim().toLowerCase(),c=t.content?t.content.trim().replace(/<[^>]+>/g,"").toLowerCase():"",r=0,a={title:-1,content:-1,firstOccur:-1,lastOccur:-1},n&&f.forEach(function(t){a.title=n.indexOf(t),a.content=c.indexOf(t),-1===a.title&&-1===a.content||(e=!0,-1!==a.content&&((a.firstOccur>a.content||-1===a.firstOccur)&&(a.firstOccur=a.content),a.lastOccur<a.content&&(a.lastOccur=a.content)),r+=-1!==a.title?2:0,r+=-1!==a.content?1:0,l++)}),e&&((o={}).title=t.title,o.link=t.url,f.forEach(function(t){var e=new RegExp(regEscape(t)+"(?!>)","gi");o.title=o.title.replace(e,"<m>$&</m>")}),0<=a.firstOccur&&(i=a.firstOccur-100,s=a.lastOccur+100,i<0&&(i=0),0===i&&(s=200),s>c.length&&(s=c.length),o.content=c.substr(i,s-i),f.forEach(function(t){var e=new RegExp(regEscape(t)+"(?!>)","gi");o.content=o.content.replace(e,"<m>$&</m>")})),u.push([o,r])))}),0!==l?(u.sort(function(t,e){return e[1]-t[1]}),createPosts(u)):clearPosts()})}function keySearch(t){loadDataSearch(searchDataFile,searchEscape(t))}function inpSearch(){var t=document.getElementById("search-input").value;return window.history.pushState({},0,window.location.href.split("?")[0]+"?s="+t.replace(/\s/g,"+")),keySearch(t),!1}!function(){var t=getParam("s");""!==t&&keySearch(document.getElementById("search-input").value=t)}();