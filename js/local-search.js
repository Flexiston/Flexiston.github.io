function searchEscape(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return t.replace(/[&<>"'/]/g,(function(t){return e[t]}))}function regEscape(t){const e={"{":"\\{","}":"\\}","[":"\\[","]":"\\]","(":"\\(",")":"\\)","?":"\\?","*":"\\*",".":"\\.","+":"\\+","^":"\\^",$:"\\$"};return t.replace(/[\{\}\[\]\(\)\?\*\.\+\^\$]/g,(function(t){return e[t]}))}function getParam(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function clearPosts(){document.getElementById("search-result").innerHTML=""}function createPosts(t){const e=document.getElementById("search-result");let n="";t.forEach(t=>{n+="<hr />";const e=t[0],c=`\n        <a href="${e.link}" class="search-result__link">\n            <div class='search-result__item'>\n                <strong>\n                    ${e.title}\n                </strong>\n                <div class="search-result__content">\n                    ${e.content}\n                </div>\n            </div>\n        </a>\n        `;n+=c}),e.innerHTML=n}function loadDataSearch(t,e){fetch(t).then(t=>t.json()).then(t=>{let n=[],c=0,r=e.trim().toLowerCase().split(/\s/);t.forEach(t=>{if(void 0===t.title||void 0===t.content)return;let e=!1;const o=t.title.trim().toLowerCase(),s=t.content?t.content.trim().replace(/<[^>]+>/g,"").toLowerCase():"";let a=0,l={title:-1,content:-1,firstOccur:-1,lastOccur:-1};if(o&&r.forEach(t=>{l.title=o.indexOf(t),l.content=s.indexOf(t),-1===l.title&&-1===l.content||(e=!0,-1!==l.content&&((l.firstOccur>l.content||-1===l.firstOccur)&&(l.firstOccur=l.content),l.lastOccur<l.content&&(l.lastOccur=l.content)),a+=-1!==l.title?2:0,a+=-1!==l.content?1:0,c++)}),e){let e={};if(e.title=t.title,e.link=t.url,r.forEach(t=>{const n=new RegExp(regEscape(t)+"(?!>)","gi");e.title=e.title.replace(n,"<m>$&</m>")}),l.firstOccur>=0){const t=100;let n=l.firstOccur-t,c=l.lastOccur+t;n<0&&(n=0),0===n&&(c=2*t),c>s.length&&(c=s.length),e.content=s.substr(n,c-n),r.forEach(t=>{const n=new RegExp(regEscape(t)+"(?!>)","gi");e.content=e.content.replace(n,"<m>$&</m>")})}n.push([e,a])}}),0!==c?(n.sort((t,e)=>e[1]-t[1]),createPosts(n)):clearPosts()})}function keySearch(t){loadDataSearch(searchDataFile,searchEscape(t))}function inpSearch(){const t=document.getElementById("search-input").value;return window.history.pushState({},0,window.location.href.split("?")[0]+"?s="+t.replace(/\s/g,"+")),keySearch(t),!1}(()=>{const t=getParam("s");""!==t&&(document.getElementById("search-input").value=t,keySearch(t))})();