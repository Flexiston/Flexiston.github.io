window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;const initLeanCloudCounter=function(){function e(e,t){return new Promise((function(o,n){e("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({target:t}))).then(e=>e.json()).then(({results:i})=>{if(i&&i.length>0){var s=i[0];o(s)}else e("post","/classes/Counter",{target:t,time:0}).then(e=>e.json()).then(e=>{o(e)}).catch(e=>{console.error("Failed to create",e),n(e)})}).catch(e=>{console.error("LeanCloud Counter Error",e),n(e)})}))}function t(e){return{method:"PUT",path:"/1.1/classes/Counter/"+e,body:{time:{__op:"Increment",amount:1}}}}function o(o){var n="leancloud"===GLOBAL_CONFIG.statistics.use,i=[],s=[],a=document.getElementById("leancloud_container_site_pv");if(a||n){var l=e(o,"site-pv").then(e=>{s.push(t(e.objectId));var o=document.getElementById("leancloud_value_site_pv");o&&(o.innerText=e.time+1,a&&(a.style.display="inline"))});i.push(l)}var c=document.getElementById("leancloud_container_site_uv");if(c||n){var d=e(o,"site-uv").then(e=>{var o,n,i=(o="LeanCloud_UV_Flag",!((n=localStorage.getItem(o))&&(new Date).getTime()-parseInt(n)<=864e5||(localStorage.setItem(o,(new Date).getTime().toString()),0)));i&&s.push(t(e.objectId));var a=document.getElementById("leancloud_value_site_uv");a&&(a.innerText=e.time+(i?1:0),c&&(c.style.display="inline"))});i.push(d)}if(""+(GLOBAL_CONFIG_SITE.isPost||GLOBAL_CONFIG_SITE.isPage)=="true"){var r=document.getElementById("leancloud_container_page_pv");if(r||n){var h=decodeURI(GLOBAL_CONFIG_SITE.pagePath),u=e(o,h).then(e=>{if(s.push(t(e.objectId)),r){var o=document.getElementById("leancloud_value_page_pv");o&&(o.innerText=(e.time||0)+1,r.style.display="inline")}});i.push(u)}}n&&Promise.all(i).then(()=>{s.length>0&&function(e,t){new Promise((function(o,n){e("post","/batch",{requests:t}).then(e=>{o(e)}).catch(e=>{console.error("Failed to save visitor count",e),n(e)})}))}(o,s)})}var n=GLOBAL_CONFIG.statistics.leancloud.appId,i=GLOBAL_CONFIG.statistics.leancloud.appKey,s=GLOBAL_CONFIG.statistics.leancloud.serverURL;function a(e){o((t,o,s)=>fetch(`${e}/1.1${o}`,{method:t,headers:{"X-LC-Id":n,"X-LC-Key":i,"Content-Type":"application/json"},body:JSON.stringify(s)}))}var l="-MdYXbMMI"!==n.slice(-9)?s:`https://${n.slice(0,8).toLowerCase()}.api.lncldglobal.com`;l?a(l):fetch("https://app-router.leancloud.cn/2/route?appId="+n).then(e=>e.json()).then(({api_server:e})=>{a("https://"+e)})};"leancloud"===GLOBAL_CONFIG.statistics.use&&initLeanCloudCounter(),$((function(){const e=()=>{const e=GLOBAL_CONFIG.highlight.highlightCopy,t=GLOBAL_CONFIG.highlight.highlightLang,o=GLOBAL_CONFIG_SITE.isHighlightShrink,n=e||t||void 0!==o,i="highlighjs"===GLOBAL_CONFIG.highlight.plugin?$("figure.highlight"):$('pre[class*="language-"]');if(n&&i.length){const n="prismjs"===GLOBAL_CONFIG.highlight.plugin;let s="",a="";const l=!0===o?"closed":"";if(void 0!==o&&(s=`<i class="fas fa-angle-down expand ${l}"></i>`),e&&(a='<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>'),t)n?i.each((function(){const e=$(this),t=`<div class="code-lang">${void 0!==e.attr("data-language")?e.attr("data-language"):"Code"}</div>`;e.wrap('<figure class="highlight"></figure>').before(`<div class="highlight-tools ${l}">${s+t+a}</div>`)})):i.each((function(e,t){const o=$(this);let n=o.attr("class").split(" ")[1];"plain"!==n&&void 0!==n||(n="Code");const i=`<div class="code-lang">${n}</div>`;o.prepend(`<div class="highlight-tools ${l}">${s+i+a}</div>`)}));else{const e=`<div class="highlight-tools ${l}">${s+a}</div>`;n?i.wrap('<figure class="highlight"></figure>').before(e):i.prepend(e)}if(void 0!==o&&$(".highlight-tools >.expand").on("click",(function(){const e=$(this),t=e.parent().nextAll();e.toggleClass("closed"),t.is(":visible")?t.css("display","none"):t.css("display","block")})),e){const e=function(e,t){document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar?btf.snackbarShow(GLOBAL_CONFIG.copy.success):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.success).animate({opacity:1},450,(function(){setTimeout((function(){$(t).prev(".copy-notice").animate({opacity:0},650)}),400)}))):void 0!==GLOBAL_CONFIG.Snackbar?btf.snackbarShow(GLOBAL_CONFIG.copy.noSupport):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.noSupport)};$(".highlight-tools >.copy-button").on("click",(function(){const t=$(this).parents("figure.highlight");t.addClass("copy-true");const o=window.getSelection(),i=document.createRange();n?i.selectNodeContents(t.find("> pre code")[0]):i.selectNodeContents(t.find("table .code pre")[0]),o.removeAllRanges(),o.addRange(i);const s=o.toString();e(s,this),o.removeAllRanges(),t.removeClass("copy-true")}))}}},t=()=>{$("ul.tag-list li").each(()=>{const e=Math.floor(5*Math.random()+1);2===e?$(this).find("a").addClass("tagred"):3===e?$(this).find("a").addClass("tagyellow"):4===e?$(this).find("a").addClass("tagblue"):5===e?$(this).find("a").addClass("taggreen"):6===e?$(this).find("a").addClass("tagpurple"):1===e&&$(this).find("a").addClass("tagbrown")})};window.refreshFn=function(){(()=>{const e=$("#view-div"),t=$(window).height(),o=$("header"),n=$(".rebar");let i=$(window).scrollTop();$(document,window).scroll((function(){i=$(window).scrollTop(),n&&n.css("width",$(document).scrollTop()/($(document).height()-$(window).height())*100+"%"),i>0?o.addClass("header--show"):o.removeClass("header--show")})),o.hover((function(){i=$(window).scrollTop(),i>t&&e&&e.css("opacity",1),o.addClass("header--show")})),o.mouseleave((function(){i=$(window).scrollTop(),0===i&&o.removeClass("header--show"),i<=t&&e&&e.css("opacity",0)}))})(),(()=>{const e=()=>{new Typed("#subt",{strings:coverSubtitle.split(","),startDelay:300,typeSpeed:150,loop:hasCover,backSpeed:50,cursorChar:"|"})};"function"==typeof Typed?e():$.getScript("https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js",e)})(),$("#btn-dropdown").on("click touchstart",()=>{const e=$("#dropdown-menus");requestAnimationFrame(()=>{e.css("display","flex"),requestAnimationFrame(()=>{e.css("transform","translateY(0)"),e.css("opacity",1)})})}),$("#btn-dropback").on("click touchstart",()=>{const e=$("#dropdown-menus");e.css("transform","translateY(2.25rem)"),e.css("opacity",0),setTimeout(()=>{e.fadeOut()},350)}),(()=>{const e=document.title;let t;$(document).on("visibilitychange",()=>{document.hidden?(document.title="Σ(っ °Д °)っ 别走呀~ 再看看嘛",clearTimeout(t)):(document.title="ヾ(≧∇≦*)ゝ 欢迎回来呀~ | "+e,t=setTimeout(()=>{document.title=e},1500))})})(),(()=>{const e=()=>{ScrollReveal().reveal("main .reveal",{distance:"32px",duration:"800",interval:"20",scale:"1",easing:"ease-out"})};"function"==typeof ScrollReveal?e():$.getScript("https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js",e)})(),(()=>{const e=()=>{L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"sagiri/",tagMode:!1,log:!1,model:{jsonPath:"https://cdn.jsdelivr.net/gh/Flexiston/CDN@latest/live2d/sagiri/model.json"},display:{height:400,width:200,position:"left",hOffset:10},mobile:{show:!1}})};screen.width>720&&!/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&("function"==typeof L2Dwidget?e():$.getScript("https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js",e))})(),$(document).ready(()=>{$("body").GalMenu({menu:"GalMenusDrop"})}),$(document.body).on("touchmove",e=>{e.preventDefault()}),$(window).on("load",()=>{setTimeout(()=>{$(document.body).unbind("touchmove")},750)}),(()=>{const e=$("#b2t"),t=$("#view-div"),o=$(window).height();let n=!1,i=$(window).scrollTop();if(!e)return;e.on("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),$(document,window).scroll(()=>{n||(requestAnimationFrame(s),n=!0)});const s=a=>{let l=$(window).scrollTop();const c=l-i;i=l,l>o?(e.removeClass("b2t--hide").addClass("b2t--show"),c>0?e.removeClass("b2t--hl"):e.addClass("b2t--hl"),t.length>0&&t.fadeIn(),n=!1):(e.removeClass("b2t--show").addClass("b2t--hide").removeClass("b2t--hl"),t.length>0&&t.fadeOut(),requestAnimationFrame(s))}})(),GLOBAL_CONFIG.highlight&&e(),GLOBAL_CONFIG.showLoader&&$(window).on("load",()=>{$(document.body).css("overflow","auto"),$("#loader").addClass("loaded")}),GLOBAL_CONFIG_SITE.isSidebar&&(()=>{const e=()=>{const e=$("#article-container");if(e.length<0)return;const t=e.offset().top;tocbot.init({tocSelector:"#tocbot",contentSelector:"#post-body",headingSelector:"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:0,scrollSmooth:!0,headingsOffset:-t}),$(".toc-list-item").length>0&&$("#toc").css("visibility","visible")};"function"==typeof tocbot?e():$.getScript("https://cdn.jsdelivr.net/npm/tocbot@4.11.1/dist/tocbot.min.js",e)})(),"tag"===GLOBAL_CONFIG_SITE.pageLayout&&t()},refreshFn()}));